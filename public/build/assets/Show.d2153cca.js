import{u as H,r as M,R as s}from"./app.ded17e9f.js";import"./splide-core.min.1c135564.js";/* empty css                */import{u as j,B as p}from"./Block.6a16a628.js";import{u as f}from"./store.24793c1e.js";import E from"./Modal.b83feaf5.js";import q from"./Gift.2d55eb58.js";import z from"./Ucapan.8fd52935.js";import D from"./Reservation.2321350e.js";import{AudioButton as O}from"./AudioButton.b45e2781.js";import{Y as N}from"./index.26894aa4.js";import"./Countdown.965a0f27.js";import"./CloseButton.7843f354.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function ce(){var w,T;const{invitation:l}=H().props,{template:I}=l,R=window.location.search,x=new URLSearchParams(R),{isModalGiftShow:k,setIsModalGiftShow:F}=f(e=>e),{isModalUcapanShow:G,setIsModalUcapanShow:L}=f(e=>e),{isModalRsvpShow:P,setIsModalRsvpShow:A}=f(e=>e),{isCoverShow:C,setIsCoverShow:V}=f(e=>e),{pageIndex:S,setPageIndex:y}=f(e=>e),[g,U]=M.exports.useState(!1),n=N.parse(l.custom_template.content),_=N.parse(I.template),v=N.parse(l.custom_template.template),r=e=>(n==null?void 0:n.features.hasOwnProperty(e))===!0?n==null?void 0:n.features[e]:null;let m=[];if(n!=null&&n.features)for(const e in n.features)n.features[e].is_page_enabled===!1&&m.push(e);const B=()=>{var a,t,i;let e={};if(e.nama_tamu=(a=x.get("to"))!=null?a:"Nama Tamu",n.pages)for(let c=0;c<n.pages.length;c++)e={...e,...n.pages[c]};for(const c in e){let d=document.querySelectorAll("."+c);for(let o=0;o<d.length;o++)d[o]&&(((t=d[o])==null?void 0:t.tagName)==="IMG"?d[o].src=e[c]:((i=d[o])==null||i.tagName,d[o].innerHTML=e[c]))}},b=()=>{var a,t;let e;return l.is_custom_template==!0?e=(a=v.canvas)!=null?a:null:e=(t=_.canvas)!=null?t:null,e},h=()=>l.is_custom_template==!0?v.background:_.background,u=()=>{let a=l.is_custom_template==!0?v.pages:_.pages;for(let t=0;t<m.length;t++)m[t]==="maps"?a=a.filter(i=>i.page_title!=="Maps"):m[t]==="rsvp"?a=a.filter(i=>i.page_title!=="RSVP"):m[t]==="ucapan"?a=a.filter(i=>i.page_title!=="Ucapan"):m[t]==="gift"&&(a=a.filter(i=>i.page_title!=="Gift"));return a};return j(),M.exports.useEffect(()=>{const e=document.createElement("style");return e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e),n&&B(),g===!1&&setTimeout(U(!0),1500),$("#main-slider").not(".slick-initialized").slick({fade:!0,arrows:!1,infinite:!1,asNavFor:"#thumb-slider"}).on("afterChange",(a,t)=>{y(t.currentSlide)}),$("#thumb-slider").not(".slick-initialized").slick({arrows:!1,infinite:!1,asNavFor:"#main-slider",slidesToShow:4,centerMode:!1,focusOnSelect:!0,swipeToSlide:!0}).on("afterChange",(a,t)=>{y(t.currentSlide)}),document.addEventListener("swiped",a=>{if(a.detail.dir==="up"){let t=$("#main-slider").slick("slickCurrentSlide");t<u().length&&$("#main-slider").slick("slickGoTo",t+1)}else if(a.detail.dir==="down"){let t=$("#main-slider").slick("slickCurrentSlide");t>0&&$("#main-slider").slick("slickGoTo",t-1)}}),()=>{document.removeEventListener("swiped",()=>{})}},[S,g]),g===!1?s.createElement("div",{className:"d-flex w-100 justify-content-center align-items-center",style:{height:"100vh"}},s.createElement("div",{className:"spinner-border text-secondary",role:"status",style:{width:"3rem",height:"3rem"}},s.createElement("span",{className:"sr-only"},"Loading..."))):s.createElement("div",{className:"canvas-absolute"},s.createElement("div",{className:"canvas-relative layer__canvas"},((w=r("audio"))==null?void 0:w.is_enabled)&&s.createElement(O,{src:r("audio").data.src}),s.createElement(E,{isShow:k,onClose:()=>F(!1)},s.createElement(q,{data:r("gift")})," "),s.createElement(E,{isShow:G,onClose:()=>L(!1)},s.createElement(z,{data:r("ucapan"),messages:l.invitation_message})," "),s.createElement(E,{isShow:P,onClose:()=>A(!1)},s.createElement(D,{data:r("rsvp")})," "),b()&&b()[0].blocks.map((e,a)=>s.createElement(p,{key:a,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:r(e.type),getFeatureData:r})),s.createElement("div",{className:`cover-container ${C==!1&&"cover-container--out"}`},s.createElement("div",{className:"background-container"},h()&&h()[0].blocks.map((e,a)=>s.createElement(p,{key:a,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:r(e.type),getFeatureData:r}))),s.createElement("div",{className:"content-frame"},u()&&((T=u()[0].blocks)==null?void 0:T.map((e,a)=>s.createElement(p,{key:a,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:r(e.type),getFeatureData:r}))))),s.createElement("div",{id:"main-slider"},g===!0&&u()&&u().slice(1).map((e,a)=>s.createElement("div",{key:a,className:`page-${a+1}`},S===a&&s.createElement(s.Fragment,null,s.createElement("div",{className:"layer__background"},h()&&h()[e.background].blocks.map((t,i)=>s.createElement(p,{key:i,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:r(t.type),getFeatureData:r}))),s.createElement("div",{className:"layer__content"},s.createElement("div",{className:"content-frame"},e.blocks.map((t,i)=>s.createElement(p,{key:i,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:r(t.type),getFeatureData:r})))))))),s.createElement("div",{id:"thumb-slider"},u().slice(1).map((e,a)=>s.createElement("li",{key:a,className:"menu-thumb d-flex flex-column align-items-center justify-content-center"},s.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),s.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))}export{ce as default};
