import{u as q,r as R,R as a}from"./app.2f69742f.js";import"./splide-core.min.1c135564.js";/* empty css                */import{u as z,B as p}from"./Block.e2d5d3c5.js";import{u as f}from"./store.f83c530d.js";import E from"./Modal.579c8bf1.js";import D from"./Gift.336bc2a9.js";import O from"./Ucapan.655d42e9.js";import V from"./Reservation.c3eb2fa3.js";import{AudioButton as Y}from"./AudioButton.67474017.js";import{Y as N}from"./index.26894aa4.js";import"./Countdown.e831e35d.js";import"./CloseButton.5831eaa9.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function me(){var w,T,M,I;const{invitation:c}=q().props,{template:x}=c,k=window.location.search,F=new URLSearchParams(k),{isModalGiftShow:G,setIsModalGiftShow:L}=f(e=>e),{isModalUcapanShow:P,setIsModalUcapanShow:A}=f(e=>e),{isModalRsvpShow:C,setIsModalRsvpShow:U}=f(e=>e),{isCoverShow:B,setIsCoverShow:J}=f(e=>e),{pageIndex:S,setPageIndex:y}=f(e=>e),[g,H]=R.exports.useState(!1),r=N.parse(c.custom_template.content),_=N.parse(x.template),v=N.parse(c.custom_template.template),i=e=>(r==null?void 0:r.features.hasOwnProperty(e))===!0?r==null?void 0:r.features[e]:null;let u=[];if(r!=null&&r.features)for(const e in r.features)r.features[e].is_page_enabled===!1&&u.push(e);const j=()=>{var t,s,l;let e={};if(e.nama_tamu=(t=F.get("to"))!=null?t:"Nama Tamu",r.pages)for(let n=0;n<r.pages.length;n++)e={...e,...r.pages[n]};for(const n in e){let o=document.querySelectorAll("."+n);for(let m=0;m<o.length;m++)o[m]&&(((s=o[m])==null?void 0:s.tagName)==="IMG"?o[m].src=e[n]:((l=o[m])==null||l.tagName,o[m].innerHTML=e[n]))}},b=()=>{var t,s;let e;return c.is_custom_template==!0?e=(t=v.canvas)!=null?t:null:e=(s=_.canvas)!=null?s:null,e},h=()=>c.is_custom_template==!0?v.background:_.background,d=()=>{let t=c.is_custom_template==!0?v.pages:_.pages;for(let s=0;s<u.length;s++)u[s]==="maps"?t=t.filter(l=>l.page_title!=="Maps"):u[s]==="rsvp"?t=t.filter(l=>l.page_title!=="RSVP"):u[s]==="ucapan"?t=t.filter(l=>l.page_title!=="Ucapan"):u[s]==="gift"&&(t=t.filter(l=>l.page_title!=="Gift"));return t};return z(),R.exports.useEffect(()=>{const e=document.createElement("style");return e.innerHTML=c.is_custom_template==!0?c.custom_template.css:c.template.css,document.head.appendChild(e),r&&j(),g===!1&&setTimeout(H(!0),1500),$("#main-slider").not(".slick-initialized").slick({fade:!0,arrows:!1,infinite:!1,asNavFor:"#thumb-slider"}).on("afterChange",(t,s)=>{y(s.currentSlide)}),$("#thumb-slider").not(".slick-initialized").slick({arrows:!1,infinite:!1,asNavFor:"#main-slider",slidesToShow:4,centerMode:!1,focusOnSelect:!0,swipeToSlide:!0}).on("afterChange",(t,s)=>{y(s.currentSlide)}),document.addEventListener("swiped",t=>{if(t.detail.dir==="up"){let s=$("#main-slider").slick("slickCurrentSlide");s<d().length&&$("#main-slider").slick("slickGoTo",s+1)}else if(t.detail.dir==="down"){let s=$("#main-slider").slick("slickCurrentSlide");s>0&&$("#main-slider").slick("slickGoTo",s-1)}}),()=>{document.removeEventListener("swiped",()=>{})}},[S,g]),g===!1?a.createElement("div",{className:"d-flex w-100 justify-content-center align-items-center",style:{height:"100vh"}},a.createElement("div",{className:"spinner-border text-secondary",role:"status",style:{width:"3rem",height:"3rem"}},a.createElement("span",{className:"sr-only"},"Loading..."))):a.createElement("div",{className:"canvas-absolute"},a.createElement("div",{className:"canvas-relative layer__canvas"},((w=i("audio"))==null?void 0:w.is_enabled)&&a.createElement(Y,{src:i("audio").data.src}),a.createElement(E,{isShow:G,onClose:()=>L(!1)},a.createElement(D,{data:i("gift")})," "),a.createElement(E,{isShow:P,onClose:()=>A(!1)},a.createElement(O,{data:i("ucapan"),messages:c.invitation_message})," "),a.createElement(E,{isShow:C,onClose:()=>U(!1)},a.createElement(V,{data:i("rsvp")})," "),b()&&((T=b()[0].blocks)==null?void 0:T.map((e,t)=>a.createElement(p,{key:t,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))),a.createElement("div",{className:`cover-container ${B==!1&&"cover-container--out"}`},a.createElement("div",{className:"background-container"},h()&&((M=h()[0].blocks)==null?void 0:M.map((e,t)=>a.createElement(p,{key:t,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i})))),a.createElement("div",{className:"content-frame"},d()&&((I=d()[0].blocks)==null?void 0:I.map((e,t)=>a.createElement(p,{key:t,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))))),a.createElement("div",{id:"main-slider"},g===!0&&d()&&d().slice(1).map((e,t)=>{var s,l;return a.createElement("div",{key:t,className:`page-${t+1}`},S===t&&a.createElement(a.Fragment,null,a.createElement("div",{className:"layer__background"},h()&&((s=h()[e.background].blocks)==null?void 0:s.map((n,o)=>a.createElement(p,{key:o,type:n.type,className:n.className,attributes:n.attributes,container_attributes:n.container_attributes,content:n.content,blocks:n.blocks,data:i(n.type),getFeatureData:i})))),a.createElement("div",{className:"layer__content"},a.createElement("div",{className:"content-frame"},(l=e.blocks)==null?void 0:l.map((n,o)=>a.createElement(p,{key:o,type:n.type,className:n.className,attributes:n.attributes,container_attributes:n.container_attributes,content:n.content,blocks:n.blocks,data:i(n.type),getFeatureData:i}))))))})),a.createElement("div",{id:"thumb-slider"},d().slice(1).map((e,t)=>a.createElement("li",{key:t,className:"menu-thumb d-flex flex-column align-items-center justify-content-center"},a.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),a.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))}export{me as default};
