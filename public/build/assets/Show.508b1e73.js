import{u as L,r as U,R as s}from"./app.89b27cb7.js";import"./splide-core.min.1c135564.js";/* empty css                */import{u as A,B as g}from"./Block.ba60819f.js";import{u as p}from"./store.12f61e4f.js";import h from"./Modal.92ae7352.js";import B from"./Gift.4cda73d9.js";import H from"./Ucapan.d9d3d438.js";import q from"./Reservation.3d6c7058.js";import{AudioButton as z}from"./AudioButton.2374ea29.js";import{Y as _}from"./index.26894aa4.js";import"./Countdown.dc9113be.js";import"./CloseButton.3893755f.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function ne(){var w,b;const{invitation:l}=L().props,{template:y}=l,M=window.location.search,T=new URLSearchParams(M),{isModalGiftShow:k,setIsModalGiftShow:I}=p(e=>e),{isModalUcapanShow:R,setIsModalUcapanShow:F}=p(e=>e),{isModalRsvpShow:G,setIsModalRsvpShow:P}=p(e=>e),{isCoverShow:x,setIsCoverShow:D}=p(e=>e),{pageIndex:v,setPageIndex:E}=p(e=>e),r=_.parse(l.custom_template.content),S=_.parse(y.template),N=_.parse(l.custom_template.template),i=e=>(r==null?void 0:r.features.hasOwnProperty(e))===!0?r==null?void 0:r.features[e]:null;let m=[];if(r!=null&&r.features)for(const e in r.features)r.features[e].is_page_enabled===!1&&m.push(e);const C=()=>{var a,t,n;let e={};if(e.nama_tamu=(a=T.get("to"))!=null?a:"Nama Tamu",r.pages)for(let o=0;o<r.pages.length;o++)e={...e,...r.pages[o]};for(const o in e){let d=document.querySelectorAll("."+o);for(let c=0;c<d.length;c++)d[c]&&(((t=d[c])==null?void 0:t.tagName)==="IMG"?d[c].src=e[o]:((n=d[c])==null||n.tagName,d[c].innerHTML=e[o]))}},f=()=>l.is_custom_template==!0?N.background:S.background,u=()=>{let a=l.is_custom_template==!0?N.pages:S.pages;for(let t=0;t<m.length;t++)m[t]==="maps"?a=a.filter(n=>n.page_title!=="Maps"):m[t]==="rsvp"?a=a.filter(n=>n.page_title!=="RSVP"):m[t]==="ucapan"?a=a.filter(n=>n.page_title!=="Ucapan"):m[t]==="gift"&&(a=a.filter(n=>n.page_title!=="Gift"));return a};return A(),U.exports.useEffect(()=>{const e=document.createElement("style");return e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e),r&&C(),$("#main-slider").not(".slick-initialized").slick({fade:!0,arrows:!1,infinite:!1,asNavFor:"#thumb-slider"}).on("afterChange",(a,t)=>{E(t.currentSlide)}),$("#thumb-slider").not(".slick-initialized").slick({arrows:!1,infinite:!1,asNavFor:"#main-slider",slidesToShow:4,centerMode:!1,focusOnSelect:!0,swipeToSlide:!0}).on("afterChange",(a,t)=>{E(t.currentSlide)}),document.addEventListener("swiped",a=>{if(a.detail.dir==="up"){let t=$("#main-slider").slick("slickCurrentSlide");t<u().length&&$("#main-slider").slick("slickGoTo",t+1),console.log("swiped up")}else if(a.detail.dir==="down"){let t=$("#main-slider").slick("slickCurrentSlide");t>0&&$("#main-slider").slick("slickGoTo",t+1),console.log("swiped down")}}),()=>{}},[v]),s.createElement("div",{className:"canvas-absolute"},s.createElement("div",{className:"canvas-relative"},((w=i("audio"))==null?void 0:w.is_enabled)&&s.createElement(z,{src:i("audio").data.src}),s.createElement(h,{isShow:k,onClose:()=>I(!1)},s.createElement(B,{data:i("gift")})," "),s.createElement(h,{isShow:R,onClose:()=>F(!1)},s.createElement(H,{data:i("ucapan"),messages:l.invitation_message})," "),s.createElement(h,{isShow:G,onClose:()=>P(!1)},s.createElement(q,{data:i("rsvp")})," "),s.createElement("div",{className:`cover-container ${x==!1&&"cover-container--out"}`},s.createElement("div",{className:"background-container"},f()&&f()[0].blocks.map((e,a)=>s.createElement(g,{key:a,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))),s.createElement("div",{className:"content-frame"},u()&&((b=u()[0].blocks)==null?void 0:b.map((e,a)=>s.createElement(g,{key:a,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))))),s.createElement("div",{id:"main-slider"},u()&&u().slice(1).map((e,a)=>s.createElement("div",{key:a,className:`page-${a+1}`},v===a&&s.createElement(s.Fragment,null,s.createElement("div",{className:"layer__background"},f()&&f()[e.background].blocks.map((t,n)=>s.createElement(g,{key:n,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:i(t.type),getFeatureData:i}))),s.createElement("div",{className:"layer__content"},s.createElement("div",{className:"content-frame"},e.blocks.map((t,n)=>s.createElement(g,{key:n,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:i(t.type),getFeatureData:i})))))))),s.createElement("div",{id:"thumb-slider"},u().slice(1).map((e,a)=>s.createElement("li",{key:a,className:"menu-thumb d-flex flex-column align-items-center justify-content-center"},s.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),s.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))}export{ne as default};
