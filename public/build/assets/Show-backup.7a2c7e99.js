import{u as q,r as B,R as s}from"./app.ded17e9f.js";import{S as w}from"./splide-core.min.1c135564.js";/* empty css                */import{u as H,B as g}from"./Block.6a16a628.js";import{u as d}from"./store.24793c1e.js";import h from"./Modal.b83feaf5.js";import $ from"./Gift.2d55eb58.js";import j from"./Ucapan.8fd52935.js";import C from"./Reservation.2321350e.js";import{AudioButton as D}from"./AudioButton.b45e2781.js";import{Y as v}from"./index.26894aa4.js";import"./Countdown.965a0f27.js";import"./CloseButton.7843f354.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function re(){var b,S;const{invitation:l}=q().props,{template:y}=l,M=window.location.search,T=new URLSearchParams(M),{isModalGiftShow:x,setIsModalGiftShow:I}=d(e=>e),{isModalUcapanShow:R,setIsModalUcapanShow:P}=d(e=>e),{isModalRsvpShow:A,setIsModalRsvpShow:F}=d(e=>e),{isCoverShow:G,setIsCoverShow:V}=d(e=>e),{pageIndex:f,setPageIndex:U}=d(e=>e),r=v.parse(l.custom_template.content),E=v.parse(y.template),N=v.parse(l.custom_template.template),i=e=>(r==null?void 0:r.features.hasOwnProperty(e))===!0?r==null?void 0:r.features[e]:null;let u=[];if(r!=null&&r.features)for(const e in r.features)r.features[e].is_page_enabled===!1&&u.push(e);const L=()=>{var t,a,n;let e={};if(e.nama_tamu=(t=T.get("to"))!=null?t:"Nama Tamu",r.pages)for(let o=0;o<r.pages.length;o++)e={...e,...r.pages[o]};for(const o in e){let c=document.querySelectorAll("."+o);for(let m=0;m<c.length;m++)c[m]&&(((a=c[m])==null?void 0:a.tagName)==="IMG"?c[m].src=e[o]:((n=c[m])==null||n.tagName,c[m].innerHTML=e[o]))}},_=()=>l.is_custom_template==!0?N.background:E.background,p=()=>{let t=l.is_custom_template==!0?N.pages:E.pages;for(let a=0;a<u.length;a++)u[a]==="maps"?t=t.filter(n=>n.page_title!=="Maps"):u[a]==="rsvp"?t=t.filter(n=>n.page_title!=="RSVP"):u[a]==="ucapan"?t=t.filter(n=>n.page_title!=="Ucapan"):u[a]==="gift"&&(t=t.filter(n=>n.page_title!=="Gift"));return t};return H(),B.exports.useEffect(()=>{const e=document.createElement("style");e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e);var t=new w("#main-slider",{arrows:!1,width:"100vw",height:"100%",direction:"ttb",pagination:!1,dragMinThreshold:2}),a=new w("#thumb-slider",{arrows:!1,fixedWidth:"100px",height:"70px",pagination:!1,isNavigation:!0,focus:"center"});t.sync(a),t.mount(),a.mount(),t.on("move",(n,o)=>{const c=document.querySelectorAll("#main-slider .splide__slide");c[o].style.display="none",U(n)}),t.on("drag",function(n){console.log(f)}),r&&L()},[f]),s.createElement("div",{className:"canvas-absolute"},s.createElement("div",{className:"canvas-relative"},((b=i("audio"))==null?void 0:b.is_enabled)&&s.createElement(D,{src:i("audio").data.src}),s.createElement(h,{isShow:x,onClose:()=>I(!1)},s.createElement($,{data:i("gift")})," "),s.createElement(h,{isShow:R,onClose:()=>P(!1)},s.createElement(j,{data:i("ucapan"),messages:l.invitation_message})," "),s.createElement(h,{isShow:A,onClose:()=>F(!1)},s.createElement(C,{data:i("rsvp")})," "),s.createElement("div",{className:`cover-container ${G==!1&&"cover-container--out"}`},s.createElement("div",{className:"background-container"},_()&&_()[0].blocks.map((e,t)=>s.createElement(g,{key:t,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))),s.createElement("div",{className:"content-frame"},p()&&((S=p()[0].blocks)==null?void 0:S.map((e,t)=>s.createElement(g,{key:t,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))))),s.createElement("div",{id:"main-slider",className:"splide","aria-label":"Main Slider"},s.createElement("div",{className:"splide__track"},s.createElement("ul",{className:"splide__list"},p()&&p().slice(1).map((e,t)=>s.createElement("li",{key:t,className:`page-${t+1} h-100 splide__slide d-flex align-items-center justify-content-center position-relative`},f===t&&s.createElement("div",{className:"background-container"},_()&&_()[e.background].blocks.map((a,n)=>s.createElement(g,{key:n,type:a.type,className:a.className,attributes:a.attributes,container_attributes:a.container_attributes,content:a.content,blocks:a.blocks,data:i(a.type),getFeatureData:i}))),f===t&&s.createElement("div",{className:"content-frame"},e.blocks.map((a,n)=>s.createElement(g,{key:n,type:a.type,className:a.className,attributes:a.attributes,container_attributes:a.container_attributes,content:a.content,blocks:a.blocks,data:i(a.type),getFeatureData:i})))))))),s.createElement("div",{id:"thumb-slider",className:"splide","aria-label":"Thumbnail Slider"},s.createElement("div",{className:"splide__track"},s.createElement("ul",{className:"splide__list"},p().slice(1).map((e,t)=>s.createElement("li",{key:t,className:"splide__slide menu-thumb d-flex flex-column align-items-center justify-content-center"},s.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),s.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))))}export{re as default};
