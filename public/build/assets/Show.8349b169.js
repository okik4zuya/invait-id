import{u as B,r as M,R as a}from"./app.e1f896d4.js";import"./splide-core.min.1c135564.js";/* empty css                */import{u as H,B as g}from"./Block.3ce6720b.js";import{u as p}from"./store.f290e6b6.js";import v from"./Modal.6a294aff.js";import j from"./Gift.535233f5.js";import q from"./Ucapan.8d7b54f1.js";import z from"./Reservation.9026aa93.js";import{AudioButton as D}from"./AudioButton.9827c77c.js";import{Y as _}from"./index.26894aa4.js";import"./Countdown.d834235d.js";import"./CloseButton.b58daa09.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function le(){var y,b;const{invitation:l}=B().props,{template:T}=l,k=window.location.search,I=new URLSearchParams(k),{isModalGiftShow:R,setIsModalGiftShow:x}=p(e=>e),{isModalUcapanShow:F,setIsModalUcapanShow:G}=p(e=>e),{isModalRsvpShow:L,setIsModalRsvpShow:P}=p(e=>e),{isCoverShow:A,setIsCoverShow:O}=p(e=>e),{pageIndex:E,setPageIndex:S}=p(e=>e),[h,C]=M.exports.useState(!1),r=_.parse(l.custom_template.content),N=_.parse(T.template),w=_.parse(l.custom_template.template),i=e=>(r==null?void 0:r.features.hasOwnProperty(e))===!0?r==null?void 0:r.features[e]:null;let m=[];if(r!=null&&r.features)for(const e in r.features)r.features[e].is_page_enabled===!1&&m.push(e);const U=()=>{var s,t,n;let e={};if(e.nama_tamu=(s=I.get("to"))!=null?s:"Nama Tamu",r.pages)for(let c=0;c<r.pages.length;c++)e={...e,...r.pages[c]};for(const c in e){let d=document.querySelectorAll("."+c);for(let o=0;o<d.length;o++)d[o]&&(((t=d[o])==null?void 0:t.tagName)==="IMG"?d[o].src=e[c]:((n=d[o])==null||n.tagName,d[o].innerHTML=e[c]))}},f=()=>l.is_custom_template==!0?w.background:N.background,u=()=>{let s=l.is_custom_template==!0?w.pages:N.pages;for(let t=0;t<m.length;t++)m[t]==="maps"?s=s.filter(n=>n.page_title!=="Maps"):m[t]==="rsvp"?s=s.filter(n=>n.page_title!=="RSVP"):m[t]==="ucapan"?s=s.filter(n=>n.page_title!=="Ucapan"):m[t]==="gift"&&(s=s.filter(n=>n.page_title!=="Gift"));return s};return H(),M.exports.useEffect(()=>{const e=document.createElement("style");return e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e),r&&U(),h===!1&&C(!0),$("#main-slider").not(".slick-initialized").slick({fade:!0,arrows:!1,infinite:!1,asNavFor:"#thumb-slider"}).on("afterChange",(s,t)=>{S(t.currentSlide)}),$("#thumb-slider").not(".slick-initialized").slick({arrows:!1,infinite:!1,asNavFor:"#main-slider",slidesToShow:4,centerMode:!1,focusOnSelect:!0,swipeToSlide:!0}).on("afterChange",(s,t)=>{S(t.currentSlide)}),document.addEventListener("swiped",s=>{if(s.detail.dir==="up"){let t=$("#main-slider").slick("slickCurrentSlide");t<u().length&&$("#main-slider").slick("slickGoTo",t+1)}else if(s.detail.dir==="down"){let t=$("#main-slider").slick("slickCurrentSlide");t>0&&$("#main-slider").slick("slickGoTo",t-1)}}),()=>{document.removeEventListener("swiped",()=>{})}},[E,h]),h===!1?a.createElement("div",{className:"d-flex w-100 justify-content-center align-items-center",style:{height:"100vh"}},a.createElement("div",{className:"spinner-border text-secondary",role:"status",style:{width:"3rem",height:"3rem"}},a.createElement("span",{className:"sr-only"},"Loading..."))):a.createElement("div",{className:"canvas-absolute"},a.createElement("div",{className:"canvas-relative"},((y=i("audio"))==null?void 0:y.is_enabled)&&a.createElement(D,{src:i("audio").data.src}),a.createElement(v,{isShow:R,onClose:()=>x(!1)},a.createElement(j,{data:i("gift")})," "),a.createElement(v,{isShow:F,onClose:()=>G(!1)},a.createElement(q,{data:i("ucapan"),messages:l.invitation_message})," "),a.createElement(v,{isShow:L,onClose:()=>P(!1)},a.createElement(z,{data:i("rsvp")})," "),a.createElement("div",{className:`cover-container ${A==!1&&"cover-container--out"}`},a.createElement("div",{className:"background-container"},f()&&f()[0].blocks.map((e,s)=>a.createElement(g,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))),a.createElement("div",{className:"content-frame"},u()&&((b=u()[0].blocks)==null?void 0:b.map((e,s)=>a.createElement(g,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))))),a.createElement("div",{id:"main-slider"},u()&&u().slice(1).map((e,s)=>a.createElement("div",{key:s,className:`page-${s+1}`},E===s&&a.createElement(a.Fragment,null,a.createElement("div",{className:"layer__background"},f()&&f()[e.background].blocks.map((t,n)=>a.createElement(g,{key:n,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:i(t.type),getFeatureData:i}))),a.createElement("div",{className:"layer__content"},a.createElement("div",{className:"content-frame"},e.blocks.map((t,n)=>a.createElement(g,{key:n,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:i(t.type),getFeatureData:i})))))))),a.createElement("div",{id:"thumb-slider"},u().slice(1).map((e,s)=>a.createElement("li",{key:s,className:"menu-thumb d-flex flex-column align-items-center justify-content-center"},a.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),a.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))}export{le as default};
