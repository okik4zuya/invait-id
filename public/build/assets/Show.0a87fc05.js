import{u as L,r as B,R as a}from"./app.e8a65cdc.js";import{S}from"./splide-core.min.1c135564.js";import{u as H,B as _}from"./Block.eb70c5f4.js";import{u as d}from"./store.7b992263.js";import g from"./Modal.de55baf0.js";import $ from"./Gift.6ff15099.js";import j from"./Ucapan.c80a1d8d.js";import q from"./Reservation.f3136862.js";import{AudioButton as C}from"./AudioButton.482340db.js";import{Y as h}from"./index.26894aa4.js";import"./Countdown.16b0c17c.js";import"./CloseButton.eeb34c81.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function ne(){var N,b;const{invitation:l}=L().props,{template:w}=l,y=window.location.search,M=new URLSearchParams(y),{isModalGiftShow:x,setIsModalGiftShow:T}=d(e=>e),{isModalUcapanShow:I,setIsModalUcapanShow:R}=d(e=>e),{isModalRsvpShow:P,setIsModalRsvpShow:F}=d(e=>e),{isCoverShow:G,setIsCoverShow:D}=d(e=>e),{pageIndex:U,setPageIndex:V}=d(e=>e),n=h.parse(l.custom_template.content),v=h.parse(w.template),E=h.parse(l.custom_template.template),r=e=>(n==null?void 0:n.features.hasOwnProperty(e))===!0?n==null?void 0:n.features[e]:null;let m=[];if(n!=null&&n.features)for(const e in n.features)n.features[e].is_page_enabled===!1&&m.push(e);const A=()=>{var s,t,i;let e={};if(e.nama_tamu=(s=M.get("to"))!=null?s:"Nama Tamu",n.pages)for(let c=0;c<n.pages.length;c++)e={...e,...n.pages[c]};for(const c in e){let u=document.querySelectorAll("."+c);for(let o=0;o<u.length;o++)u[o]&&(((t=u[o])==null?void 0:t.tagName)==="IMG"?u[o].src=e[c]:((i=u[o])==null||i.tagName,u[o].innerHTML=e[c]))}},f=()=>l.is_custom_template==!0?E.background:v.background,p=()=>{let s=l.is_custom_template==!0?E.pages:v.pages;for(let t=0;t<m.length;t++)m[t]==="maps"?s=s.filter(i=>i.page_title!=="Maps"):m[t]==="rsvp"?s=s.filter(i=>i.page_title!=="RSVP"):m[t]==="ucapan"?s=s.filter(i=>i.page_title!=="Ucapan"):m[t]==="gift"&&(s=s.filter(i=>i.page_title!=="Gift"));return s};return H(),B.exports.useEffect(()=>{const e=document.createElement("style");e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e);var s=new S("#main-slider",{arrows:!1,width:"100vw",height:"calc(100vh - 70px)",direction:"ttb",pagination:!1,dragMinThreshold:2}),t=new S("#thumb-slider",{arrows:!1,fixedWidth:"100px",height:"70px",pagination:!1,isNavigation:!0,focus:"center"});s.sync(t),s.mount(),t.mount(),n&&A()},[U]),a.createElement("div",{className:"canvas-absolute"},a.createElement("div",{className:"canvas-relative"},((N=r("audio"))==null?void 0:N.is_enabled)&&a.createElement(C,{src:r("audio").data.src}),a.createElement(g,{isShow:x,onClose:()=>T(!1)},a.createElement($,{data:r("gift")})," "),a.createElement(g,{isShow:I,onClose:()=>R(!1)},a.createElement(j,{data:r("ucapan"),messages:l.invitation_message})," "),a.createElement(g,{isShow:P,onClose:()=>F(!1)},a.createElement(q,{data:r("rsvp")})," "),a.createElement("div",{className:`cover-container animate__animated ${G==!1&&"cover-container--out"}`},a.createElement("div",{className:"background-container"},f()&&f()[0].blocks.map((e,s)=>a.createElement(_,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:r(e.type),getFeatureData:r}))),a.createElement("div",{className:"content-frame"},p()&&((b=p()[0].blocks)==null?void 0:b.map((e,s)=>a.createElement(_,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:r(e.type),getFeatureData:r}))))),a.createElement("div",{id:"main-slider",className:"splide","aria-label":"Main Slider"},a.createElement("div",{className:"splide__track"},a.createElement("ul",{className:"splide__list"},p()&&p().slice(1).map((e,s)=>a.createElement("li",{key:s,className:`page-${s+1} splide__slide d-flex align-items-center justify-content-center position-relative`},a.createElement("div",{className:"background-container"},f()&&f()[e.background].blocks.map((t,i)=>a.createElement(_,{key:i,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:r(t.type),getFeatureData:r}))),a.createElement("div",{className:"content-frame"},e.blocks.map((t,i)=>a.createElement(_,{key:i,type:t.type,className:t.className,attributes:t.attributes,container_attributes:t.container_attributes,content:t.content,blocks:t.blocks,data:r(t.type),getFeatureData:r})))))))),a.createElement("div",{id:"thumb-slider",className:"splide","aria-label":"Thumbnail Slider"},a.createElement("div",{className:"splide__track"},a.createElement("ul",{className:"splide__list"},p().slice(1).map((e,s)=>a.createElement("li",{key:s,className:"splide__slide menu-thumb d-flex flex-column align-items-center justify-content-center"},a.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),a.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))))}export{ne as default};
