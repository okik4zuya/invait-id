import{u as L,r as B,R as t}from"./app.f7210626.js";import"./splide-core.min.1c135564.js";/* empty css                */import{u as C,B as _}from"./Block.aefa6e61.js";import{u as d}from"./store.24503cce.js";import g from"./Modal.d7e7e816.js";import H from"./Gift.94cb6711.js";import k from"./Ucapan.5718fcc2.js";import q from"./Reservation.d0969eec.js";import{AudioButton as D}from"./AudioButton.7a1305fe.js";import{Y as h}from"./index.26894aa4.js";import"./Countdown.3e0ed9d2.js";import"./CloseButton.4b52fcb1.js";import"./typeof.2a08ffa3.js";import"./cst-visit.b44e8428.js";function ne(){var b,S;const{invitation:l}=L().props,{template:w}=l,y=window.location.search,M=new URLSearchParams(y),{isModalGiftShow:T,setIsModalGiftShow:I}=d(e=>e),{isModalUcapanShow:R,setIsModalUcapanShow:P}=d(e=>e),{isModalRsvpShow:x,setIsModalRsvpShow:F}=d(e=>e),{isCoverShow:G,setIsCoverShow:V}=d(e=>e),{pageIndex:v,setPageIndex:U}=d(e=>e),r=h.parse(l.custom_template.content),E=h.parse(w.template),N=h.parse(l.custom_template.template),i=e=>(r==null?void 0:r.features.hasOwnProperty(e))===!0?r==null?void 0:r.features[e]:null;let m=[];if(r!=null&&r.features)for(const e in r.features)r.features[e].is_page_enabled===!1&&m.push(e);const A=()=>{var s,a,n;let e={};if(e.nama_tamu=(s=M.get("to"))!=null?s:"Nama Tamu",r.pages)for(let c=0;c<r.pages.length;c++)e={...e,...r.pages[c]};for(const c in e){let u=document.querySelectorAll("."+c);for(let o=0;o<u.length;o++)u[o]&&(((a=u[o])==null?void 0:a.tagName)==="IMG"?u[o].src=e[c]:((n=u[o])==null||n.tagName,u[o].innerHTML=e[c]))}},f=()=>l.is_custom_template==!0?N.background:E.background,p=()=>{let s=l.is_custom_template==!0?N.pages:E.pages;for(let a=0;a<m.length;a++)m[a]==="maps"?s=s.filter(n=>n.page_title!=="Maps"):m[a]==="rsvp"?s=s.filter(n=>n.page_title!=="RSVP"):m[a]==="ucapan"?s=s.filter(n=>n.page_title!=="Ucapan"):m[a]==="gift"&&(s=s.filter(n=>n.page_title!=="Gift"));return s};return C(),B.exports.useEffect(()=>{const e=document.createElement("style");return e.innerHTML=l.is_custom_template==!0?l.custom_template.css:l.template.css,document.head.appendChild(e),r&&A(),$("#main-slider").not(".slick-initialized").slick({fade:!0,arrows:!1,verticalSwiping:!0,infinite:!1,touchTreshold:50}).on("afterChange",(s,a)=>{U(a.currentSlide)}),()=>{}},[v]),t.createElement("div",{className:"canvas-absolute"},t.createElement("div",{className:"canvas-relative"},((b=i("audio"))==null?void 0:b.is_enabled)&&t.createElement(D,{src:i("audio").data.src}),t.createElement(g,{isShow:T,onClose:()=>I(!1)},t.createElement(H,{data:i("gift")})," "),t.createElement(g,{isShow:R,onClose:()=>P(!1)},t.createElement(k,{data:i("ucapan"),messages:l.invitation_message})," "),t.createElement(g,{isShow:x,onClose:()=>F(!1)},t.createElement(q,{data:i("rsvp")})," "),t.createElement("div",{className:`cover-container ${G==!1&&"cover-container--out"}`},t.createElement("div",{className:"background-container"},f()&&f()[0].blocks.map((e,s)=>t.createElement(_,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))),t.createElement("div",{className:"content-frame"},p()&&((S=p()[0].blocks)==null?void 0:S.map((e,s)=>t.createElement(_,{key:s,type:e.type,className:e.className,attributes:e.attributes,container_attributes:e.container_attributes,content:e.content,blocks:e.blocks,data:i(e.type),getFeatureData:i}))))),t.createElement("div",{id:"main-slider"},p()&&p().slice(1).map((e,s)=>t.createElement("div",{key:s,className:`page-${s+1}`},v===s&&t.createElement(t.Fragment,null,t.createElement("div",{className:"layer__background"},f()&&f()[e.background].blocks.map((a,n)=>t.createElement(_,{key:n,type:a.type,className:a.className,attributes:a.attributes,container_attributes:a.container_attributes,content:a.content,blocks:a.blocks,data:i(a.type),getFeatureData:i}))),t.createElement("div",{className:"layer__content"},t.createElement("div",{className:"content-frame"},e.blocks.map((a,n)=>t.createElement(_,{key:n,type:a.type,className:a.className,attributes:a.attributes,container_attributes:a.container_attributes,content:a.content,blocks:a.blocks,data:i(a.type),getFeatureData:i})))))))),t.createElement("div",{id:"thumb-slider",className:"splide","aria-label":"Thumbnail Slider"},t.createElement("div",{className:"splide__track"},t.createElement("ul",{className:"splide__list"},p().slice(1).map((e,s)=>t.createElement("li",{key:s,className:"splide__slide menu-thumb d-flex flex-column align-items-center justify-content-center"},t.createElement("i",{className:`${e.thumb_icon} menu-thumb__icon`}),t.createElement("div",{className:"menu-thumb__title mt-1"},e.page_title))))))))}export{ne as default};
